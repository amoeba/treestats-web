%table.char
  %thead
    %tr.header.line
      %td.headerleft.center{:colspan => 2}
        %span.name= "#{@character['title']} #{@character['name']}"
        %span.block.title
          = "#{@character['gender']} #{@character['race']}"
          - if @character['current_title']
            = TitleHelper::get_title_name(@character['current_title'])
        %table.internal.xplum
          %tbody
            - if @character['luminance_earned']
              %tr
                %td
              %tr
                %td.left
                  %span Luminance:
                %td.right
                  %span= "#{add_commas(@character['luminance_earned'].to_s)} / #{add_commas(@character['luminance_total'].to_s)}"
            - else
            %tr
              %td.left
                %span Total Experience (XP):
              %td.right
                %span= add_commas(@character['total_xp'].to_s)
      %td.headerright.center.level
        %span.block Character
        %span.block Level
        %span.block.level= @character['level']
  %tbody.skills
    %tr
      %td.specialized{:colspan => 3} Specialized Skills
    - @character['skills'].select { |key,value| value['training'] == "Specialized"}.sort.each do |skill|
      %tr
        %td.icon
          %img{:src => "/images/skills/#{skill[1]["name"]}.png"}
        %td= skill[1]["name"].split("_").map(&:capitalize).join(" ")
        %td.right= skill[1]["base"]
    %tr
      %td.trained{:colspan => 3} Trained Skills
    - @character['skills'].select { |key,value| value['training'] == "Trained"}.sort.each do |skill|
      %tr
        %td.icon
          %img{:src => "/images/skills/#{skill[1]["name"]}.png"}
        %td= skill[1]["name"].split("_").map(&:capitalize).join(" ")
        %td.right= skill[1]["base"]